# AiNiee 开发指南和最佳实践

## 开发原则
- **最小改动原则**: 始终秉承最小改动的原则，避免不必要的重构
- **简单方案优先**: 始终优先选择简单方案
- **避免代码重复**: 修改代码前检查是否已存在相似功能
- **环境区分**: 明确区分开发环境(dev)、测试环境(test)和生产环境(prod)

## 代码修改指导
- **谨慎修改**: 仅针对明确需求进行更改
- **避免新技术**: 修复问题时避免引入新技术/模式
- **彻底排查**: 优先彻底排查现有实现的可能性
- **移除冗余**: 引入新方案时同步移除旧逻辑

## 文件管理
- **保持整洁**: 避免在文件中编写一次性脚本
- **控制文件大小**: 文件代码超过200-300行时需重构封装
- **测试代码位置**: 所有测试代码放在 `tests/` 目录中
- **Git 操作**: 移动、改名文件使用 `git mv` 命令

## 数据和环境
- **模拟数据限制**: 仅测试环境使用模拟数据
- **环境文件保护**: 禁止覆盖 .env 文件
- **注释保留**: 修改代码时尽量不要删除原有注释
- **多语言文件**: 多语言 txt 文件不用修改，用户会用外部工具翻译

## 国际化规范
遇到需要显示给用户的国际化信息时：
1. 函数需要使用 `@with_language` 装饰器
2. 字符串要以 `t` 函数包裹
3. 有变量的字符串使用格式：`t("风格：{name}\n").format(name=template_name)`

## 任务规划
- **复杂任务**: 一定要制定计划，再按计划一步步执行
- **分步实施**: 将大任务分解为小的可管理步骤
- **进度跟踪**: 记录任务进度和遇到的问题

## 插件开发
- **插件指南**: 根据 `PluginScripts/README.md` 开发插件
- **功能扩展**: 优先考虑插件方式实现新功能
- **插件测试**: 确保插件与主程序兼容

## 文件格式支持
- **读写器系统**: 参考 `ModuleFolders/FileAccessor/README.md`
- **新格式支持**: 在 `FileReader` 和 `FileOutputer` 中添加支持
- **UI 支持**: 在 `UserInterface/Setting/ProjectSettingsPage` 中添加界面支持

## 调试和测试
- **日志记录**: 使用 Rich 库进行美化输出
- **错误处理**: 提供清晰的错误信息和处理建议
- **性能监控**: 注意长时间操作的性能影响
- **内存管理**: 避免内存泄漏，特别是在处理大文件时

## 版本控制
- **提交规范**: 遵循 Conventional Commits 标准
- **分支策略**: 使用合适的分支策略进行开发
- **代码审查**: 重要更改需要代码审查